<%- include("../../partials/header") %>

<% Details.forEach(user => { %>
  <div class="container" style="margin-top: 200px;margin-bottom: 100px;margin-right:120px;">
    <div class="courses-container" style="justify-content:center">
      <div class="course" style="width: 80%;">
        <div class="course-preview">
          <div class="d-flex flex-column align-items-center text-center">
            <div class="mt-12">
              <img src="./assets/img/about.jpg" style="height:150px;width: 150px; border-radius:50%;"
                class="mr-3 rounded-circle img-thumbnail shadow-sm">
            </div>
            <div style="width: 300px;"><br />
              <h4>
                <%= user.username %> 
              </h4>
            </div>
            <br/>
          <ul align="left">
            <li><p><b> Contests Participated:</b> <%= user.participatedContest.length %>  </p></li>
            <!-- <li><p><b> Contests Won:</b> 04</p></li> -->
          </ul>
          <div class="row">
            <div class="col-xl-3"> 
            <!-- <button type="button" class="btn" style="background-color:white ; color:#302b63;padding: 10px; margin: 10px; border-radius: 27px;width: 150px;">
                Contact
            </button> -->
            </div>
          </div>
          </div>
        </div>
        <div class="course-info">
          <div class="row">
            <h2>Participated Contest Details</h2>
            <div style="overflow-y: scroll; height: 300px; overflow-x: scroll; ">
            <table class="table table-striped table-bordered " >
              <thead>
                <tr>
                  <th scope="col">S.no</th>
                  <th scope="col">Contest name</th>
                  <th scope="col">Contest Category</th>
                  <th scope="col">Points</th>
                  <th scope="col">Work Submitted</th>
                </tr>
              </thead>
              <tbody>
              <% ContestData.forEach((contest,index)=>{ %>
                <tr>
                  <th scope="row"> <%= index+1 %>  </th>
                  <td> <%= contest.contestName %>  </td>
                  <td> <%= contest.category %>  </td>
                <% user.participatedContest.forEach(work => { %>
                    <% if(work.contestId== contest._id){ %>
                  <td> <%= work.points %>  </td>
                  <td> <a href="<%= work.workSubmitted !== "No" ? work.workSubmitted: '#' %>"  >View here</a> </td>
                  <%  } %> 
                <% }); %> 
                  
                </tr>
              <% }) %> 
                
              </tbody>
            </table>
            </div>
          </div>
         
        </div>
      </div>
    </div>
  </div>
<% }); %>

<%- include("../../partials/footer") %>
